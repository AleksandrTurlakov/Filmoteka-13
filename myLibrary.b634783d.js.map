{"mappings":"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","sources":["src/js/getWatchedQueue.js"],"sourcesContent":["// import myLibraryPage from './myLibraryPage.js';\n\nimport cardEl from '../js/templates/card.hbs';\nimport { getDataApi } from './getDataApi';\nimport modalWindow from './templates/modalWindow.hbs';\n\nconst libraryUl = document.querySelector('.library__list');\nconst libraryBack = document.querySelector('.library');\n\nconst watchedBtn = document.querySelector('#watched-btn');\nconst queueBtn = document.querySelector('#queue-btn');\nconst body = document.querySelector('body');\nconst backdropLibrary = document.querySelector('.backdropLibrary');\n\nconst watched = JSON.parse(localStorage.getItem('watched'));\nconst queue = JSON.parse(localStorage.getItem('queue'));\n\nwatchedBtn.addEventListener('click', onWatchedClick);\nqueueBtn.addEventListener('click', onQueueClick);\n\nfunction onWatchedClick() {\n  libraryUl.innerHTML = '';\n  libraryUl.insertAdjacentHTML('beforeend', watched.map(cardEl).join(''));\n  libraryUl.classList.remove('visually-hidden');\n  libraryBack.classList.add('visually-hidden');\n  watchedBtn.classList.toggle('activeBtn');\n  queueBtn.classList.remove('activeBtn');\n\n  watched.forEach(index => console.log(index));\n}\n\nfunction onQueueClick() {\n  libraryUl.innerHTML = '';\n  libraryUl.insertAdjacentHTML('beforeend', queue.map(cardEl).join(''));\n  libraryUl.classList.remove('visually-hidden');\n  libraryBack.classList.add('visually-hidden');\n  queueBtn.classList.toggle('activeBtn');\n  watchedBtn.classList.remove('activeBtn');\n}\n\nlet movie_id = '';\n\nlibraryUl.addEventListener('click', handleCardClick);\nfunction handleCardClick(evt) {\n  if (evt.target === evt.currentTarget) return;\n  backdropLibrary.innerHTML = '';\n  const parent = evt.target.closest('li');\n  movie_id = parent.dataset.id;\n  const URL = `https://api.themoviedb.org/3/movie/${movie_id}?api_key=7bfeb33324f72574136d1cd14ae769b5`;\n\n  function findFilm() {\n    getDataApi(URL).then(response => buildElements(response));\n  }\n  findFilm();\n\n  function buildElements(response) {\n    const genr = response.genres.map(genr => genr.name).join(', ');\n\n    function srcAudit() {\n      if (!response.poster_path) {\n        return `https://st4.depositphotos.com/14953852/22772/v/600/depositphotos_227725020-stock-illustration-no-image-available-icon-flat.jpg`;\n      }\n      return `https://image.tmdb.org/t/p/w500${response.poster_path}`;\n    }\n    const src = srcAudit();\n    const name = response.title.toUpperCase();\n    const vote = response.vote_average.toFixed(1);\n    const vote_count = response.vote_count;\n    const popularity = response.popularity;\n    const original_title = response.original_title;\n    const overview = response.overview;\n    const data = {\n      src,\n      name,\n      vote,\n      vote_count,\n      popularity,\n      original_title,\n      genr,\n      overview,\n      id: response.id,\n    };\n    backdropLibrary.insertAdjacentHTML('beforeend', modalWindow(data));\n\n    openModalWindow();\n  }\n\n  const scrollUp = document.querySelector('.scroll-up');\n\n  function openModalWindow() {\n    backdropLibrary.classList.remove('is-hidden');\n    body.classList.add('no-scroll');\n    scrollUp.classList.remove('scroll-up--active');\n    backdropLibrary.removeEventListener('click', openModalWindow);\n    addListenersOnModalWindow();\n  }\n\n  function addListenersOnModalWindow() {\n    const closeModal = document.querySelector('.button-close');\n    closeModal.addEventListener('click', onBtnCloseModalWindow);\n    backdropLibrary.addEventListener('click', closeModalWindow);\n  }\n\n  function closeModalWindow(e) {\n    console.log(e.target);\n    console.log(e.currentTarget);\n\n    if (e.target === e.currentTarget) {\n      backdropLibrary.classList.add('is-hidden');\n      body.classList.remove('no-scroll');\n      scrollUp.classList.add('scroll-up--active');\n      // closeModal.removeEventListener('click', onBtnCloseModalWindow);\n      backdropLibrary.removeEventListener('click', closeModalWindow);\n    }\n  }\n\n  function onBtnCloseModalWindow() {\n    backdropLibrary.classList.add('is-hidden');\n    body.classList.remove('no-scroll');\n    scrollUp.classList.add('scroll-up--active');\n    // closeModal.removeEventListener('click', onBtnCloseModalWindow);\n    backdropLibrary.removeEventListener('click', closeModalWindow);\n  }\n\n  document.addEventListener('keydown', escapeClose);\n  function escapeClose(event) {\n    if (event.code !== 'Escape') return;\n    if (event.code === 'Escape') {\n      backdropLibrary.classList.add('is-hidden');\n      body.classList.remove('no-scroll');\n      scrollUp.classList.add('scroll-up--active');\n      document.removeEventListener('keydown', escapeClose);\n    }\n  }\n}\n"],"names":["$1v5Hx","parcelRequire","$bcdd322481633fd2$var$libraryUl","document","querySelector","$bcdd322481633fd2$var$libraryBack","$bcdd322481633fd2$var$watchedBtn","$bcdd322481633fd2$var$queueBtn","$bcdd322481633fd2$var$body","$bcdd322481633fd2$var$backdropLibrary","$bcdd322481633fd2$var$watched","JSON","parse","localStorage","getItem","$bcdd322481633fd2$var$queue","addEventListener","innerHTML","insertAdjacentHTML","map","default","join","classList","remove","add","toggle","forEach","index","console","log","$bcdd322481633fd2$var$movie_id","evt","target","currentTarget","parent","closest","dataset","id","URL","concat","$4LWpC","getDataApi","then","response","genr1","genres","genr","name","srcAudit","poster_path","data","src","title","toUpperCase","vote","vote_average","toFixed","vote_count","popularity","original_title","overview","$7uIyH","openModalWindow","buildElements","scrollUp","removeEventListener","onBtnCloseModalWindow","closeModalWindow","e","escapeClose","event","code"],"version":3,"file":"myLibrary.b634783d.js.map"}